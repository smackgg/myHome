<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<!--为了让 IE 浏览器运行最新的渲染模式下-->
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<!--为了确保适当的绘制和触屏缩放-->
	<meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
	<!--让部分国产浏览器默认采用高速模式渲染页面-->
	<meta name="renderer" content="webkit">
	<title>许岩的个人主页</title>
</head>
<body>
	<nav class="navbar navbar-default navbar-inverse navbar-fixed-top">
	  <div class="container-fluid">
	    <div class="navbar-header">
	      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
	        <span class="sr-only">Toggle navigation</span>
	        <span class="icon-bar"></span>
	        <span class="icon-bar"></span>
	        <span class="icon-bar"></span>
	      </button>
	      <a class="navbar-brand" href="#">许岩个人主页</a>
	    </div>
	    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
	      <ul class="nav navbar-nav">
	        <li><a href="http://winnerweb.github.io/">我的博客<span class="sr-only">(current)</span></a></li>
	        <li><a href="http://github.com/winnerweb">My GitHub</a></li>
	        <li class="dropdown">
	          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>
	          <ul class="dropdown-menu">
	            <li><a href="#" index="1">首页</a></li>
	            <li role="separator" class="divider"></li>
	            <li><a href="#" index="2">个人信息</a></li>
	            <li role="separator" class="divider"></li>
	            <li><a href="#" index="3">我的项目</a></li>
	            <li role="separator" class="divider"></li>
	            <li><a href="#" index="4">兴趣爱好</a></li>
	          </ul>
	        </li>
	        <li><a href="#" style="border:2px solid #ccc">滑动鼠标滚轮进行翻页。。</a></li>
	        <li><a href="#" style="border:2px solid #ccc">此页面目前只是半成品。。</a></li>
	      </ul>
	      <div class="form-group navbar-form navbar-right">
	          <input type="text" class="form-control" placeholder="Search">
	      </div>
	</nav>


	<div id="pageHome">
		<div class="page page1"  index="1" id="page1">
			<div class="container">
				<div class="introduce"></div>
			</div>
		</div>
		<div class="page page2" index="2">
			<div class="container"></div>
		</div>
		<div class="page page3" index="3">
			<div class="container"></div>
		</div>
		<div class="page page4" index="4">
			<div class="container"></div>
		</div>
	</div>

	<div class="leftCtrl">
		<ul>
			<li index="1"></li>
			<li index="2"></li>
			<li index="3"></li>
			<li index="4"></li>
		</ul>
	</div>

	<div class="snow"></div>
	<script type="text/javascript" src="js/jquery.js"></script>
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<link rel="stylesheet" href="css/main.css">
	<link rel="stylesheet" href="css/animations.css">
	<script type="text/javascript" src="js/main.js"></script>


<script type="text/javascript" src="js/ThreeCanvas.js"></script>
<script type="text/javascript" src="js/Snow.js"></script>
<script type="text/javascript">
var SCREEN_WIDTH = window.innerWidth;
var SCREEN_HEIGHT = window.innerHeight;
var container;

var particle;

var camera;
var scene;
var renderer;

var mouseX = 0;
var mouseY = 0;

var windowHalfX = window.innerWidth / 2;
var windowHalfY = window.innerHeight / 2;

var particles = []; 
var particleImage = new Image();
particleImage.src = 'http://7xl432.com1.z0.glb.clouddn.com/ParticleSmoke.png';
function init() {
	var container1 = document.getElementsByClassName('snow')[0];
	camera = new THREE.PerspectiveCamera( 75, SCREEN_WIDTH / SCREEN_HEIGHT, 1, 10000 );
	camera.position.z = 1000;

	scene = new THREE.Scene();
	scene.add(camera);
	renderer = new THREE.CanvasRenderer();
	renderer.setSize(SCREEN_WIDTH, SCREEN_HEIGHT);
	var material = new THREE.ParticleBasicMaterial( { map: new THREE.Texture(particleImage) } );
		
	for (var i = 0; i < 500; i++) {

		particle = new Particle3D( material);
		particle.position.x = Math.random() * 2000 - 1000;
		particle.position.y = Math.random() * 2000 - 1000;
		particle.position.z = Math.random() * 2000 - 1000;
		particle.scale.x = particle.scale.y =  1;
		scene.add( particle );		
		particles.push(particle); 
	}
	container1.appendChild( renderer.domElement );
	// document.addEventListener( 'mousemove', onDocumentMouseMove, false );
	// document.addEventListener( 'touchstart', onDocumentTouchStart, false );
	// document.addEventListener( 'touchmove', onDocumentTouchMove, false );
	
	setInterval( loop, 1000 / 60 );
	
}

function onDocumentMouseMove( event ) {

	mouseX = event.clientX - windowHalfX;
	mouseY = event.clientY - windowHalfY;
}

// function onDocumentTouchStart( event ) {

// 	if ( event.touches.length == 1 ) {

// 		event.preventDefault();

// 		mouseX = event.touches[ 0 ].pageX - windowHalfX;
// 		mouseY = event.touches[ 0 ].pageY - windowHalfY;
// 	}
// }

// function onDocumentTouchMove( event ) {

// 	if ( event.touches.length == 1 ) {

// 		event.preventDefault();

// 		mouseX = event.touches[ 0 ].pageX - windowHalfX;
// 		mouseY = event.touches[ 0 ].pageY - windowHalfY;
// 	}
// }
function loop() {
	for(var i = 0; i<particles.length; i++){
		var particle = particles[i]; 
		particle.updatePhysics(); 
		with(particle.position)
		{
			if(y<-1000) y+=2000; 
			if(x>1000) x-=2000; 
			else if(x<-1000) x+=2000; 
			if(z>1000) z-=2000; 
			else if(z<-1000) z+=2000; 
		}				
	}
	camera.position.x += ( mouseX - camera.position.x ) * 0.05;
	camera.position.y += ( - mouseY - camera.position.y ) * 0.05;
	camera.lookAt(scene.position); 
	renderer.render( scene, camera );
}
init();
</script>
</body>
</html>